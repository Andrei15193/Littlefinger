<input type="hidden" name="validated" id="validated" value="{{ form.isValidated }}">

<div class="mb-3">
    <label for="name" class="form-label">{{{ markdown translation.expenses.form.name.label }}}</label>
    <input type="text" class="form-control form-control-sm{{#if form.isValidated}}{{#if form.name.error}} is-invalid{{else}} is-valid{{/if}}{{/if}}" id="name" name="name" value="{{ form.name.value }}">
    <div class="invalid-feedback">{{{ markdown form.name.error }}}</div>
</div>
<div class="mb-3">
    <label for="shop" class="form-label">{{{ markdown translation.expenses.form.shop.label }}}</label>
    <input type="text" class="form-control form-control-sm{{#if form.isValidated}}{{#if form.shop.error}} is-invalid{{else}} is-valid{{/if}}{{/if}}" id="shop" name="shop" value="{{ form.shop.value }}" list="shopOptions">
    <datalist id="shopOptions">
        {{#each form.shop.options}}
        <option value="{{ this }}">
        {{/each}}
    </datalist>

    <div class="invalid-feedback">{{{ markdown form.shop.error }}}</div>
</div>
<div class="mb-3">
    <label for="tags" class="form-label">{{{ markdown translation.expenses.form.tags.label }}}</label>
    <div class="input-group">
        <input type="text" class="form-control form-control-sm{{#if form.isValidated}}{{#if form.tags.error}} is-invalid{{else}} is-valid{{/if}}{{/if}}" list="tagOptions" id="tags" name="tags" value="{{#each form.tags.value}}{{#if @first}}{{ this.name }}{{/if}}{{/each}}">
        <datalist id="tagOptions">
            {{#each form.tags.options}}
            <option value="{{ this.name }}">
            {{/each}}
        </datalist>
        <button class="btn btn-sm btn-outline-secondary rounded-end" type="submit" name="command" value="add-tag">{{{ markdown translation.expenses.form.tags.addMoreButtonLabel }}}</button>

        <div class="invalid-feedback">{{{ markdown form.tags.error }}}</div>
    </div>
    <div class="mt-1">
        {{#each form.tags.value}}
            {{#unless @first}}
                <div class="tag tag-edit {{ expenseTagColorClass this.color }} d-inline-flex flex-row">
                    <div class="badge rounded-pill">
                        {{ this.name }}
                    </div>
                    <button type="submit" name="command" value="remove-tag:{{ this.name }}" class="badge rounded-pill btn-danger px-2 py-0 border-0 d-flex flex-row align-items-center">
                        <svg
                            version="1.0"
                            height="0.7rem"
                            viewBox="0 0 121.31 122.876"
                            preserveAspectRatio="xMidYMid meet">
                            <path
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                d="M90.914,5.296c6.927-7.034,18.188-7.065,25.154-0.068 c6.961,6.995,6.991,18.369,0.068,25.397L85.743,61.452l30.425,30.855c6.866,6.978,6.773,18.28-0.208,25.247 c-6.983,6.964-18.21,6.946-25.074-0.031L60.669,86.881L30.395,117.58c-6.927,7.034-18.188,7.065-25.154,0.068 c-6.961-6.995-6.992-18.369-0.068-25.397l30.393-30.827L5.142,30.568c-6.867-6.978-6.773-18.28,0.208-25.247 c6.983-6.963,18.21-6.946,25.074,0.031l30.217,30.643L90.914,5.296L90.914,5.296z" />
                        </svg>
                    </button>
                </div>
            {{/unless}}
        {{/each}}

        {{#each form.tags.value}}
            {{#unless @first}}
                <input type="hidden" name="tags" value="{{ this.name }}">
            {{/unless}}
        {{/each}}
    </div>
</div>
<div class="mb-3">
    <label for="price" class="form-label">{{{ markdown translation.expenses.form.price.label }}}</label>
    <div class="input-group">
        <input type="text" class="form-control form-control-sm currency-input{{#if form.isValidated}}{{#if form.currency.error}} is-invalid{{else}} is-valid{{/if}}{{/if}}" id="currency" name="currency" placeholder="Currency" value="{{ form.currency.value }}" list="currencyOptions">
        <datalist id="currencyOptions">
            {{#each form.currency.options}}
            <option value="{{ this }}">
            {{/each}}
        </datalist>

        <input type="number" lang="" step="any" class="form-control form-control-sm{{#if form.isValidated}}{{#if form.price.error}} is-invalid{{else}} is-valid{{/if}}{{/if}}" id="price" name="price" value="{{ form.price.value }}">

        {{#if form.currency.error }}<div class="invalid-feedback">{{{ markdown form.currency.error }}}</div>{{/if}}
        {{#if form.price.error }}<div class="invalid-feedback">{{{ markdown form.price.error }}}</div>{{/if}}
    </div>
</div>
<div class="mb-3">
    <label for="quantity" class="form-label">{{{ markdown translation.expenses.form.quantity.label }}}</label>
    <input type="number" step="any" class="form-control form-control-sm{{#if form.isValidated}}{{#if form.quantity.error}} is-invalid{{else}} is-valid{{/if}}{{/if}}" id="quantity" name="quantity" value="{{ form.quantity.value }}">
    <div class="invalid-feedback">{{{ markdown form.quantity.error }}}</div>
</div>
<div class="mb-3">
    <label for="date" class="form-label">{{{ markdown translation.expenses.form.date.label }}}</label>
    <input type="date" class="form-control form-control-sm{{#if form.isValidated}}{{#if form.date.error}} is-invalid{{else}} is-valid{{/if}}{{/if}}" id="date" name="date" value="{{ toInputDateValue form.date.value }}">
    <div class="invalid-feedback">{{{ markdown form.date.error }}}</div>
</div>